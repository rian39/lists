# 'Have you forgotten?'

# Introduction

Presentation presents another presentation I saw recently about online grocery shopping at Tesco, a large supermarket chain based in the UK. The lists in this setting are recommendations for further purchases under the title of 'Have you forgotten?'. When you shop for groceries online, the 'Have you forgotten' recommendations appear when at the checkout stage. 
While the title 'have you forgotten' implies that you will be shown items that could have been or are usually on a shopping list, as we will see, the items on this list are recommendations. They are only a few of them: five. 

Shopping lists are quite prosaic -- a dozen lines scrawled on the back of a used envelope stuck on the refrigerator door ![shopping_list](figure/1_shopping.png ) -- and sublime -- a million products ranked in some kind of order for tens or hundreds of millions of people. I regard this list of just five suggestions given to Tesco's online customers as symptomatic of a major contemporary form of ordering, the recommendation list, that we see in many  forms of news, media, entertainment, marketing, advertising.

The shift from a handwritten list to 'Have you forgotten?' is perhaps a development in memory practices. It reminds me of the game 'I went shopping and I bought ... ' that I play with children sometimes at the dinner table to settle them down. The game is about remembering a well-ordered list of items - a is apple, b is for banana, c is for carrot.  
The point of the game is to use the well-ordered set of labels provided by the sequence of letters in the alphabet to remember a random and perhaps very diverse list of items. 
The longer the game continues, the harder it is to remember since the shopping list grows longer. At the same time, the many repetitions of this list, the fact that each player recites the whole list, helps memorisation. 
One trick in playing this game is to choose items that are quite unexpected. Rather than `ham`, list `halva`; rather than `fish`, add `face cream.` This is especially useful for adults in beating children. The children have better memories for items they know, but adults know more unexpected items. 

Something similar applies to recommendation systems. The system can remember very many things.
It may know everything you bought in the last few years on that site, and it can easily see what you would normally buy and add those as suggestions.
But a recommendation system finds it much harder to suggest items that you have not forgotten but may have never bought. 

If we are interested in lists from various angles -- asignifying semiotics as Maurizio Lazzarato calls it in his _Signs and Machines_ [@Lazzarato_2014] or 'a new order of spatio-temporal continuity for forms of economic, political and cultural life' as Celia Lury terms in her account of topological turn [@TBA], or even in terms of different cultural practices of listing [@Jullien_TBA] -- then contemporary lists practices such as recommendations figure as sites of intersection between different forms.

Lists also raise the question of how we institute our approach to them.
While lists such as recommendations intersect strongly with meaning and sense-making practices, they are also somewhere refractory to methods of humanities and social science research.
For on the one hand, lists are highly associative. They can be interpreted or decoded semiotically, but they also exhibit great variations in textuality that limit semiotic readings.
For on the other hand, as operational entities, they can be treated ethnomethodologically, as the production of ('the order of social settings through ...  shared sense making practices.')[https://en.wikipedia.org/wiki/Ethnomethodology]  The question for me here is whether contemporary lists can still be understood as produced through 'shared sense-making practices.' 
All lists are forms of order, since even random ordering is operationally important, but what counts as order might historically transformable, in which case the order of social settings or the problem of social order might be deeply historically contingent. 
The problem of order lies at the core of lists making, and our relation to lists can be seen as a test of the way that order operates more generally. 
Much of my paper, and my responses to the presentation I saw from a data scientist  will focus on how the ordering that is done in a recommendation lists relates to the problem of social order more generally. 
- The main narrative of the presentation concerned a shift from a set-based model for making lists to a predictive, probabilistic way of making lists in almost realtime and dealing with lists on a scale that is often difficult to grasp concretely.
I respond to the presentation in two ways -- firstly by recounting, contextualising and commenting on some of the main steps as a example of the sense-making done by data scientists and customer analytics teams in many places; and secondly, by trying to step into the list-making practices  as an occasion to intervene and participate in the list-making practices they engage in. 

# 1. The context of the presentation - Consumption and shopping
- presentation at an academic event with speakers from industry and government on statistics and operations research in industry. Speakers came from Shell, Disney, GCHQ, and various universities. 
- Shreena Patel works as a data scientist for DunnHumby, a well-known [ customer science company ](https://www.dunnhumby.com/)  focusing on online grocery shopping at Tesco.
Tesco is the largest supermarket chain in UK, famous for Clubcard starting in 1991; often cited as a leading early example of Big Data Analytics. 
DunnHumby -- Edwina Dunn and Clive Humby -- are famous for having convinced the CEO of Tesco sometime in 1991 that a loyalty card program could change the supermarket chain's relationship to its customers. [@Humby_1984]  
Clive Humby's academic work is hard to track down, but an early paper of his given at the Conference of Your Operational Researchers in Nottingham in 1984 suggests the direction that he and later Tesco would take in constructing lists [@Humby_1984] 
![Humby, 1984]( figure/Humby_young0R_1994.png )
- the problems of scale: Tesco is like Amazon or Netflix in this respect: too many people and too many products

>Tesco is the clear winner in the online grocery market, in fact it takes almost 50p of every Â£1 spent on food shopping on the internet. (https://econsultancy.com/blog/64841-how-seo-helps-tesco-to-dominate-the-online-grocery-market/)[https://econsultancy.com/blog/64841-how-seo-helps-tesco-to-dominate-the-online-grocery-market/]

# 2. The web and the shopping basket: how it was reconstituted in the 1990s
- online commerce -- transforming shopping; 
- personalization and recommendation as the killer apps for social media as a commercial process, but also in government etc. 
 
How would I characterise this shift? Use it to emphasize why attention to the algorithm is not enough -- it is the model that counts
A little history of recommender systems -- uses Varian 1997 for a start. But has no real reference list. Not sure  
Also can use Schafer -- back to Association Rule Mining from early 1990s

When commentators first began talking about recommender systems in the 1990s, they highlighted the shift from demographic-driven market research techniques to personalized recommendations. For instance, writing in 1997, Paul Resnick and Hal Varian (at that time Dean of Information Sciences at UC Berkeley, but somehow now Chief Economist at Google), made much of this difference [@Resnick_1997]. 

# 3. From the rules-based list to a 'relevancy model'

Shreena described her work at DunnHumby in terms of a shift in models from a 'rules-based list' to a 'relevancy model.' 
This was a significant change in how the 'Have You Forgotten' list was constructed. 
I assume that the rules-based model derived from the early 1990s work on the `apriori` algorithm by Rakesh Agrawal and Ramakrishnan Srikanti at IBM Research Alameda [@Agrawal_1994].
The `apriori` algorithm finds sets of items that commonly occur in transactions. 
These commonly occurring sets are expressed as association rules. 
For instance, using the `Groceries` dataset in the `R` package `arules,` we can readily see how Walmart might have discovered  -- but didn't -- the fabled association between diapers and beer.  [http://www.dssresources.com/newsletters/66.php]
It is a key algorithm in 'market basket analysis' and attempts to re-structure shopping lists.  

```{r arules, echo=TRUE}
library(arules)
library(arulesViz)
library(datasets)
data(Groceries)
itemFrequencyPlot(Groceries,topN=20,type="absolute")
# Get the rules
rules <- apriori(Groceries, parameter = list(supp = 0.001, conf = 0.8))
 
# Show the top 5 rules, but only 2 digits
options(digits=2)
inspect(rules[1:5])
summary(rules)

rules<-sort(rules, by="confidence", decreasing=TRUE)
inspect(rules[1:5])
rules<-apriori(data=Groceries, parameter=list(supp=0.001,conf = 0.15,minlen=2), 
           appearance = list(default="rhs",lhs="whole milk"),
           control = list(verbose=F))
rules<-sort(rules, decreasing=TRUE,by="confidence")
inspect(rules[1:5])  
plot(rules,method="graph",interactive=TRUE,shading=NA)
items = Groceries@itemInfo
head(items)
nrow(items)
```

The association rule-based model for the `Groceries` dataset suggests some of the characteristic ordering practices of data-mining approaches to lists. 
The association between items is expressed in the form of _rules_. These rules, a term derived from decision support literature, define sets of associations between items. 
As a set theory-based practice, the association rules define likely sets of items or shopping baskets in terms of decreasing probability.   
`r inspect(rules[1])` is a stronger association than `r inspect(rules[2])`.
So any recommendation in the 'Have You Forgotten' list should probably put them in that order. 
Association rules and the `apriori` algorithm present social order in terms of sets of common associations. 
This means that that the algorithm can be understood in terms of the set-based multiples proposed by Alain Badiou. 
Badiou in his account of multiples highlight the contrast between two different ways of grasping a multiple -- in terms of the 'numerical one' and the 'vital One' [@Badiou_2004, 72], between the 'closed' and the 'open' respectively.  
The `apriori` algorithm, might be seen as an attempt to deal with the excess of things in a Tesco supermarket, and the lack of interest or engagement that people have with them by identifying subsets whose membership is stronger by virtue of the other sets of associations that people bring with them.   
Association is stronger when it derives from an excess of different ways of being in sets.  
Badiou's argument is that being part of a set differs from belonging to a set.
An open set arises from when we dwell within a set by 'taking the intersection of two elements.' 
What might this mean in terms of ordering?
If we take the itemset from the `Groceries` dataset [@Hahsler_2006], and then run it through the Tesco online groceries site, each of the 169 items in the dataset yields dozens and sometimes thousands of results from Tesco online.  
Each of the items in the `Groceries` dataset proliferates in the Tesco site, into a new list of branded variations. 

# 4. Hack? Customers go straight to the checkout

Patel observed that the 'Have you forgotten' lists matter to people.
Some people log on and go straight to the checkout, allowing the recommendation system to supply them with the suggestions that they then move to the shopping basket.
This is the online equivalent of using an old shopping list and only adding new items when needed. 
It is also a strategy to avoid having to view too many lists, since the only way Tesco can show people what they might buy is by showing them lists of things (e.g. chicken products), but these lists are too long to work with.  
People inhabit lists and work with them no matter how they are made; thus vindicating ethnomethodologists assertion that social order is the product of ongoing sense-making practices. 


# 5. Data: 52 weeks of data for each customer: how is order constructed -- from history?
- history of data accumulations;
- shift from data mining to personalization? 
 
# 6. Gain: use good features to build models 
- what counts as a good feature? See Domingos on this
 
# 7. Sparsity: output 20 recommendations from 200,000 products
The problem of too many things to list -- this must be happening in many settings -- videos, social networks, products, etc. 
 
# 8. Value: Balancing conversion vs spend
The value of an ordering
 
# 9. Metric: precision-at-K
 
# 10. Experiment: A/B allocation
Could use the Google Infrastructure of experiment or Facebook Flow stuff here -- 1 million models
 
# 11. Infrastructure: realtime engine serves up top 5
Only in certain settings are things realtime; or only in limited ways;
Realtime has its own economies and cultures

# 12. Similarity, substitution and complementarity
- interesting contrasts here between the relations of things in a list
 
# 13. Complementarity drives conversion 
- the problem of action

# Conclusion
